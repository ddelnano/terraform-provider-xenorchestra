# xenorchestra_vm

Creates a Xen Orchestra vm resource.

## Example Usage

```hcl
data "xenorchestra_template" "template" {
    name_label = "Puppet agent - Bionic 18.04 - 1"
}

data "xenorchestra_pif" "pif" {
    device = "eth1"
}

resource "xenorchestra_cloud_config" "bar" {
  name = "cloud config name"
  template = <<EOF
#cloud-init

runcmd:
 - [ ls, -l, / ]
 - [ sh, -xc, "echo $(date) ': hello world!'" ]
 - [ sh, -c, echo "=========hello world'=========" ]
 - ls -l /root
EOF
}

resource "xenorchestra_vm" "bar" {
    memory_max = 1073733632
    cpus  = 1
    cloud_config = "${xenorchestra_cloud_config.bar.template}"
    name_label = "Name"
    name_description = "description"
    template = "${data.xenorchestra_template.template.id}"
    network {
	network_id = "${data.xenorchestra_pif.pif.network}"
    }

    disk {
      sr_id = "7f469400-4a2b-5624-cf62-61e522e50ea1"
      name_label = "Ubuntu Bionic Beaver 18.04_imavo"
      size = 32212254720 
    }
}
```

## Argument Reference
* name_label - (Required) The name of VM.
* name_description - (Optional) The description of the VM.
* template - (Required) The ID of the VM template to create the new VM from.
* cloud_config - (Required) The ID of the cloud config to use
* cpus - (Required) The number of CPUs the VM will have.
* memory_max - (Required) The amount of memory in bytes the VM will have.
* high_availabililty - (Optional) The restart priority for the VM. Possible values are `best-effort`, `restart` and empty string (no restarts on failure. Defaults to empty string.
* auto_poweron - (Optional) If the VM will automatically turn on. Defaults to `false`.
* network - (Required) The network the VM will use
** network_id - (Required) The ID of the network the VM will be on.
* disk - (Required) The disk the VM will have access to.
** sr_id - (Required) The storage repository ID to use.
** name_label - (Required) The name for the disk.
** size - (Required) The size in bytes of the disk.

## Attributes Reference
id is set to the ID generated by the XO api.
